include ./load_style/scarecow.pug

script.
  (()=>{
    const $loadingBox = document.getElementById('loading-box')
    const $body = document.body
    const preloader = {
      endLoading: () => {
        document.body.style.overflow = 'auto';
        document.getElementById('loading-box').style.transition = 'opacity 1s ease 0s'
        document.getElementById('loading-box').style.opacity = '0'
        setTimeout(function () {
          document.getElementById('loading-box').classList.add("loaded")
        }, 3000);
      },
      initLoading: () => {
        document.getElementById('loading-box').style.transition = '';
        document.getElementById('loading-box').style.opacity = '1'
        document.getElementById('loading-box').classList.remove("loaded")
      }
    }

    preloader.initLoading()
    window.addEventListener('load',() => { preloader.endLoading() })

    if (!{theme.pjax && theme.pjax.enable}) {
      document.addEventListener('pjax:send', () => { preloader.initLoading() })
      document.addEventListener('pjax:complete', () => { preloader.endLoading() })
    }
  })()